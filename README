Приветствую!

Тестирование запросов происходит прямо в командной строке из директории проекта /log$

При помощи команды curl "содержимое запроса".

Примеры запроса на различные типы фильтров:

curl "http://localhost/logs/filter?client_ip=170.96.22.86"

curl "http://localhost/logs/filter?http_info=GET%20/contact%20HTTP/1.1" // %20 это кодировка пробела

curl "http://localhost/logs/filter?response_size=%3E%3D150&response_size=%3C%3D500" // знак > кодируется как %3E | знак < кодируется как %3C | знак = кодируется как %3D | знак & кодируется как %26.

curl "http://localhost/logs/filter?user_agent=Mozilla/5.0"

curl "http://localhost/logs/filter?start_date=2024-12-31&end_date=2025-01-01" // знак & кодируется как %26.

curl "http://localhost/logs/filter?response_size%3E150" // знак > кодируется как %3E |

Обработка файлов большого размера осуществлена при помощи чтения построчно и создания пакетов записей с последующей их загрузкой

Вместо обычного JSON который является массивом объектов, он был конвертирован в NDJSON, чтобы соответствовать способу применения

Вместе с количеством записей который соответствуют критериям фильтрации выводятся сами записи, при желании удаляется двумя строками:

        $count = $query->count();
        ////$data = $query->get();

        return response()->json([
            'count' => $count,
            ////'data' => $data,
        ]);

Не работал с системными тестами, но в рамках задания попробовал написать какие-никакие тесты

В данном случае они проверяют работу метода filter() в контроллере:

1. Корректно ли фильтруются записи по полю client_ip;
2. Корректно ли фильтруются записи по полю response_size c параметром >=;
3. Корректно ли фильтруются записи по диапазону дат;
4. Корректно ли фильтруются записи по полю user_agent с оператором LIKE;

В самом тесте используется трейт RefreshDatabase

(на собеседовании я не ответил, что это и для чего сославшись на то, что не работал с ним. Вот поработал)

Который очищается базу данных и запускает миграции перед применением тестов
+
Фабрика для генерации тестовых данных


